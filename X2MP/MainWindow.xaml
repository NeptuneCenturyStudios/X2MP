<Window x:Class="X2MP.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:local="clr-namespace:X2MP"
        Title="X2 Media Player"
        Height="400"
        Width="650" 
        ResizeMode="CanResizeWithGrip"
        MinWidth="325"
        MinHeight="200"
        Style="{StaticResource WindowStyle}"
        MouseLeftButtonDown="Window_MouseLeftButtonDown"
        >

    <!--main border around window-->
    <Border BorderThickness="1" BorderBrush="CornflowerBlue">

        <Grid>

            <!--define a section for our controls which will always be visible-->
            <Grid.RowDefinitions>
                <RowDefinition Height="auto" />
                <RowDefinition Height="*" />
                <RowDefinition Height="auto" />
            </Grid.RowDefinitions>

            <!--grid for menu items-->
            <Grid Grid.Row="0">
                <StackPanel Orientation="Horizontal">
                    <Button x:Name="CloseButton" Style="{StaticResource ImageButton}"
                            HorizontalAlignment="Right"
                            Click="CloseButton_Click">
                        <Image Source="/Resources/power.png"/>
                    </Button>
                    <Button Command="{Binding OpenCollection}">
                        Collection
                    </Button>

                    <Button Command="{Binding OpenNowPlaying}">
                        Now Playing
                    </Button>

                </StackPanel>
            </Grid>

            <!--grid for everything else-->
            <Grid Grid.Row="1" >
                
                <!--<Image x:Name="vis" Width="648" Height="270" >
                    
                </Image>-->
                <!--<c:RenderCanvas x:Name="vis"></c:RenderCanvas>-->
                <Canvas x:Name="vis" >
                    
                    <Image x:Name="vimg"/>
                    
                </Canvas>
                <!--<WindowsFormsHost Grid.ColumnSpan="2" >
                    <local:Visualizer x:Name="vis" Width="500" Height="270" />
                </WindowsFormsHost>-->


                <ContentControl Content="{Binding Component}"
                                Margin="10" Grid.ColumnSpan="2"/>

            </Grid>

            <!--controls-->
            <Grid Grid.Row="2" Margin="10">
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="auto"/>
                        <RowDefinition Height="auto"/>
                    </Grid.RowDefinitions>

                    <Slider HorizontalAlignment="Stretch" Grid.Row="0" LargeChange="5000" SmallChange="1000"
                            Thumb.DragStarted="Slider_DragStarted"
                            Thumb.DragCompleted="Slider_DragCompleted"
                            Maximum="{Binding Length}" Value="{Binding Position, Mode=TwoWay, NotifyOnTargetUpdated=True, NotifyOnSourceUpdated=True}" />

                    <StackPanel Orientation="Horizontal" Grid.Row="1" HorizontalAlignment="Center">
                        <Button Style="{StaticResource ControlButton}" >
                            <Image Source="/Resources/prev.png"/>
                        </Button>
                        <Button Style="{StaticResource ControlButton}"
                                Command="{Binding Stop}">
                            <Image Source="/Resources/stop.png"/>
                        </Button>
                        <Button Style="{StaticResource ControlButton}"
                                Width="48"
                                Height="48"
                            Command="{Binding Play}" >
                            
                            <!--pause or play image, depending on player status-->
                            <Image Source="/Resources/play.png">
                                <Image.Resources>
                                    <Style TargetType="Image">
                                        <Style.Triggers>
                                            <DataTrigger Binding="{Binding IsPaused}" Value="false">
                                                <Setter Property="Source" Value="/Resources/pause.png"/>
                                            </DataTrigger>
                                            <DataTrigger Binding="{Binding IsPaused}" Value="true">
                                                <Setter Property="Source" Value="/Resources/play.png"/>
                                            </DataTrigger>
                                        </Style.Triggers>
                                    </Style>
                                </Image.Resources>
                            </Image>
                            
                        </Button>
                        <Button Style="{StaticResource ControlButton}" >
                            <Image Source="/Resources/next.png"/>
                        </Button>

                    </StackPanel>

                </Grid>


            </Grid>


        </Grid>
    </Border>

</Window>
